

# 架构设计

### 目标

不满足于能做，而是通过更 **深入** 和 **广泛** 的学习，实现高质量的代码和更优秀的架构，培养解决问题的能力。

已经到了这个阶段，建议除了看完成的教程外，平时多自主搜索信息去学习，积少成多。比如遇到了一个不了解的名词，可以去网上搜一下，感兴趣的话再进行下一步的学习。

### 🌖 并发编程（21 天）

对 Java 后端开发程序员来说，懂得如何利用有限的系统资源来提高系统的性能是很重要的，也是大厂面试考察的重点，因此并发编程（尤其是 Java 并发包的使用）这块的知识很重要。

把它放到高级，是因为在学并发编程前，需要有一定的编程经验、了解一定的操作系统知识。

#### 知识

- 线程和进程
- 线程状态
- 并行和并发
- 同步和异步
- Synchronized
- Volatile 关键字
- Lock 锁
- 死锁
- 可重入锁
- 线程安全
- 线程池
- JUC 的使用
- AQS
- Fork Join
- CAS

#### 学习建议

并发编程入门不难，依然是 **先学会使用** 基础的 Java 并发包， 再通过大量地实践和测试，了解一些原理，才能真正掌握何时使用、如何更合理地使用并发编程。而不是张口闭口多线程，上天入地高并发。

#### 经典面试题

1. volatile 关键字的作用
2. 使用线程池有哪些好处？
3. 线程池参数如何设置？
4. 什么是线程安全问题，如何解决？
5. 介绍 synchronized 的锁升级机制
6. CopyOnWriteArrayList 适用于哪种场景？

#### 资源

- 视频
  - ⭐【尚硅谷】大厂必备技术之JUC并发编程2021最新版：https://www.bilibili.com/video/BV1Kw411Z7dF （特点是短、精、新）
  - 黑马程序员全面深入学习Java并发编程：https://www.bilibili.com/video/BV16J411h7Rd （讲的很细、全面深入）
- 书籍
  - ⭐《Java并发编程实战》（国外的经典）
  - ⭐《Java 并发编程艺术》（国人写的，理论思想内容较多，有时间建议反复看）
- 项目
  - ⭐ Java 并发知识点总结：https://github.com/CL0610/Java-concurrency

### 🌖 JVM（30 天）

想要深入理解 Java，探秘 Java 跨平台的奥秘，一定要了解 Java 底层的虚拟机技术。

了解虚拟机、掌握虚拟机性能调优方法，有助于你写出更高性能、资源占用更小的优质程序。

在学习 JVM 的过程中，也能学到很多精妙的设计，开拓思路。

#### 知识

- JVM 内存结构
- JVM 生命周期
- 主流虚拟机
- Java 代码执行流程
- 类加载
  - 类加载器
  - 类加载过程
  - 双亲委派机制
- 垃圾回收
  - 垃圾回收器
  - 垃圾回收策略
  - 垃圾回收算法
  - StopTheWorld
- 字节码
- 内存分配和回收
- JVM 性能调优
  - 性能分析方法
  - 常用工具
  - 参数设置
- Java 探针
- 线上故障分析

#### 学习建议

JVM 的知识略显枯燥，建议先看视频，有实操的地方一定要实操！自己多去分析。

第一遍不理解没有关系，可以再看书来巩固，想要真正学好，《深入理解 Java 虚拟机（第三版）》一定要读。

如果只是为了通过面试可以直接看更精简的视频，比如狂神的。

#### 经典面试题

1. 介绍 JVM 的内存模型？
2. JVM 内存为什么要分代？
3. 介绍一次完整的 GC 流程
4. 介绍双亲委派模型，为什么需要它？

#### 资源

- 视频
  - ⭐ 尚硅谷宋红康 - JVM 全套教程详解：https://www.bilibili.com/video/BV1PJ411n7xZ （讲得相当全面！附有实操）
  - 【狂神说Java】JVM快速入门篇：https://www.bilibili.com/video/BV1iJ411d7jS （讲得有点浅，但都是面试重点，时间紧的小伙伴可以直接看这个）
- 书籍
  - ⭐《深入理解 Java 虚拟机（第三版）》（有理论有实践，内容丰富，不可多得的 JVM 学习神书，就是有点废头发）
- 项目
  - ⭐ Java 虚拟机底层原理知识总结：https://github.com/doocs/jvm
- 实战
  - 阿里云 JVM 实战：https://developer.aliyun.com/graph/java/point/64
- 工具
  - Arthas 开源 Java 诊断工具：https://github.com/alibaba/arthas

### 架构设计

#### 🌖 分布式

- 分布式理论
  - CAP
  - BASE
- 分布式缓存
  - Redis
  - Memcached
  - Etcd
- 一致性算法
  - Raft
  - Paxos
  - 一致性哈希
- 分布式事务
  - 解决方案
    - 2PC
    - 3PC
    - TCC
    - 本地消息表
    - MQ 事务消息
    - 最大努力通知
  - LCN 分布式事务框架：https://github.com/codingapi/tx-lcn
- 分布式 id 生成
  - Leaf 分布式 id 生成服务：https://github.com/Meituan-Dianping/Leaf
- 分布式任务调度
  - XXL-JOB 调度平台：https://www.xuxueli.com/xxl-job/
  - elastic-job：https://gitee.com/elasticjob/elastic-job
- 分布式服务调用
  - trpc
- 分布式存储
  - HDFS
  - Ceph
- 分布式数据库
  - TiDB
  - OceanBase
- 分布式文件系统
  - HDFS
- 分布式协调
  - Zookeeper
- 分布式监控
  - Prometheus
  - Zabbix
- 分布式消息队列
  - RabbitMQ
  - Kafka
  - Apache Pulsar
- 分布式日志收集
  - Elastic Stack
  - Loki
- 分布式搜索引擎
  - Elasticsearch
- 分布式链路追踪
  - Apache SkyWalking
- 分布式配置中心
  - Apollo
  - Nacos

#### 🌗 高可用

- 限流
- 降级熔断
- 冷备
- 双机热备
- 同城双活
- 异地双活
- 异地多活
- 容灾备份

#### 🌗 高并发

- 数据库
  - 分库分表
    - MyCat 中间件
    - Apache ShardingSphere 中间件
  - 读写分离
- 缓存
  - 缓存雪崩
  - 缓存击穿
  - 缓存穿透
- 负载均衡
  - 负载均衡算法
  - 软硬件负载均衡（2、3、4、7 层）

#### 🌘 服务网格

服务网格用来描述组成应用程序的微服务网络以及它们之间的交互。服务网格的规模和复杂性不断的增长，它将会变得越来越难以理解和管理，常见的需求包括服务发现、负载均衡、故障恢复、度量和监控等。

##### 知识

- Istio
  - 流量管理
  - 安全性
  - 可观测性
- Envoy（开源的边缘和服务代理）

##### 资源

- 资料大全：https://www.servicemesher.com/awesome-servicemesh/
- istio 官方文档：https://preliminary.istio.io/latest/zh
- istio 视频教程：https://www.bilibili.com/video/BV1Lf4y1x7j8
- 在线体验 istio：https://katacoda.com/courses/istio/

#### 🌘 DDD 领域驱动设计

将数据、业务流程抽象成容易理解的领域模型，通过用代码实现领域模型，来组成完整的业务系统。

##### 知识

- DDD 的优势
- DDD 的适用场景
- DDD 核心概念
  - 领域模型分类：失血、贫血、充血、涨血
  - 子域划分：核心域、通用域、支撑域
  - 限界上下文
  - 实体和值对象
  - 聚合设计
  - 领域事件
- DDD 实践

##### 资源

- DDD 入门：https://juejin.cn/post/7004002483601145863
- DDD 编码实践：https://juejin.cn/post/6844903903104860174
- DDD 实践教程：https://www.bilibili.com/video/BV1Y341167Xp

#### 🌘 其他

- Sidecar
- Serverless
- 云原生

#### 学习建议

架构设计的学习没有顶点，多看文章，思考每种设计的优缺点和适用场景，有机会的话在企业中实践即可。

还在学校、或者初入这行的同学切记，千万不要一味地去背诵架构设计的八股文。你可以背，但是这一块的知识只有结合具体的项目才有意义，所以要多做项目去实践设计的合理性，而不是什么设计都咔咔往系统里去怼。比如面试问到分布式事务，能结合自己项目中用分布式事务解决问题的经验去回答最好。

### 🌘 其他技术

- 热数据探测技术：京东 HotKey
- 数据库流水订阅：阿里 Canal
- 监控告警
- 应用安全
- 故障演练
- 流量回放