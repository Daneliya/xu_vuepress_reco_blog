---
title: API用法示例
tags:
  - Python
categories:
  - Python
---



## 一、文本总结：一建总结用户评价

### 1、大模型的革命性优势

- 从专用模型到通用大模型
  - 过去：需要为总结、提取、翻译等任务分别训练独立模型。
  - 现在：一个大模型即可完成多种自然语言处理任务，极大提升了效率和灵活性。

### 2、文本总结的常见应用场景

- 视频/音频内容摘要
  - 视频总结生成器、一键摘要工具等，通常基于“音频转文字 + 大模型总结”流程实现。
- 用户反馈分析
  - 电商、产品团队可通过AI自动分析大量用户评价，提取产品优缺点，指导市场策略和产品改进。

### 3、使用OpenAI API进行用户评价总结

~~~python
# 导入库并创建客户端
from openai import OpenAI
client = OpenAI()
# 封装通用请求函数
def get_openai_response(client, prompt, model="gpt-3.5-turbo"):
    response = client.chat.completions.create(
        model=model,
        messages=[{"role": "user", "content": prompt}],
    )
    return response.choices[0].message.content
# 构建任务提示词
product_review = """
我上个月买的这个多功能蓝牙耳机。它的连接速度还挺快，而且兼容性强，无论连接手机还是笔记本电脑，基本上都能快速配对上。
音质方面，中高音清晰，低音效果震撼，当然这个价格来说一分钱一分货吧，毕竟也不便宜。
耳机的电池续航能力不错，单次充满电可以连续使用超过8小时。
不过这个耳机也有一些我不太满意的地方。首先是在长时间使用后，耳廓有轻微的压迫感，这可能是因为耳套的材料较硬。总之我感觉戴了超过4小时后耳朵会有点酸痛，需要摘下休息下。
而且耳机的防水性能不是特别理想，在剧烈运动时的汗水防护上有待加强。
最后是耳机盒子的开合机制感觉不够紧致，有时候会不小心打开。
"""
# 动态插入上下文
product_review_prompt = f"""
你的任务是为用户对产品的评价生成简要总结。
请把总结主要分为两个方面，产品的优点，以及产品的缺点，并以Markdown列表形式展示。
用户的评价内容会以三个#符号进行包围。

###
{product_review}
###
"""
~~~

~~~python
# 输出
product_review_prompt
~~~

~~~python
# 输出结果
'\n你的任务是为用户对产品的评价生成简要总结。\n请把总结主要分为两个方面，产品的优点，以及产品的缺点，并以Markdown列表形式展示。\n用户的评价内容会以三个#符号进行包围。\n\n###\n\n我上个月买的这个多功能蓝牙耳机。它的连接速度还挺快，而且兼容性强，无论连接手机还是笔记本电脑，基本上都能快速配对上。\n音质方面，中高音清晰，低音效果震撼，当然这个价格来说一分钱一分货吧，毕竟也不便宜。\n耳机的电池续航能力不错，单次充满电可以连续使用超过8小时。\n不过这个耳机也有一些我不太满意的地方。首先是在长时间使用后，耳廓有轻微的压迫感，这可能是因为耳套的材料较硬。总之我感觉戴了超过4小时后耳朵会有点酸痛，需要摘下休息下。\n而且耳机的防水性能不是特别理想，在剧烈运动时的汗水防护上有待加强。\n最后是耳机盒子的开合机制感觉不够紧致，有时候会不小心打开。\n\n###\n'
~~~

~~~python
# 获取AI响应
response = get_openai_response(client, product_review_prompt)
response
~~~

~~~python
# 输出结果
# '产品的优点：\n- 连接速度快，兼容性强\n- 音质中高音清晰，低音效果震撼\n- 电池续航能力强，单次充满电可以连续使用超过8小时\n\n产品的缺点：\n- 长时间使用后耳廓有轻微的压迫感\n- 防水性能不够理想，在剧烈运动时的汗水防护上有待加强\n- 耳机盒子的开合机制不够紧致，有时会不小心打开'
~~~

~~~python
# 美化输出显示
print(response)
~~~

~~~python
# 输出结果
产品的优点：
- 连接速度快，兼容性强
- 音质中高音清晰，低音效果震撼
- 电池续航能力强，单次充满电可以连续使用超过8小时

产品的缺点：
- 长时间使用后耳廓有轻微的压迫感
- 防水性能不够理想，在剧烈运动时的汗水防护上有待加强
- 耳机盒子的开合机制不够紧致，有时会不小心打开
~~~



## 二、文本撰写：秒生成小红书爆款文案



~~~python
# 导入库并创建客户端
from openai import OpenAI
client = OpenAI()
# 封装通用请求函数
def get_openai_response(client, system_prompt, user_prompt, model="gpt-3.5-turbo"):
    response = client.chat.completions.create(
        model=model,
        messages=[
            {"role": "system", "content": system_prompt},
            {"role": "user", "content": user_prompt}
        ],
    )
    return response.choices[0].message.content
# 构建任务提示词
xiaohongshu_system_prompt = """
你是小红书爆款写作专家，请你遵循以下步骤进行创作：首先产出5个标题（包含适当的emoji表情），然后产出1段正文（每一个段落包含适当的emoji表情，文末有适当的tag标签）。
标题字数在20个字以内，正文字数在800字以内，并且按以下技巧进行创作。
一、标题创作技巧： 
1. 采用二极管标题法进行创作 
1.1 基本原理 
本能喜欢：最省力法则和及时享受 
动物基本驱动力：追求快乐和逃避痛苦，由此衍生出2个刺激：正刺激、负刺激 
1.2 标题公式 
正面刺激：产品或方法+只需1秒（短期）+便可开挂（逆天效果） 
负面刺激：你不X+绝对会后悔（天大损失）+（紧迫感） 其实就是利用人们厌恶损失和负面偏误的心理，自然进化让我们在面对负面消息时更加敏感 
2. 使用具有吸引力的标题 
2.1 使用标点符号，创造紧迫感和惊喜感 
2.2 采用具有挑战性和悬念的表述 
2.3 利用正面刺激和负面刺激 
2.4 融入热点话题和实用工具 
2.5 描述具体的成果和效果 
2.6 使用emoji表情符号，增加标题的活力 
3. 使用爆款关键词 
从列表中选出1-2个：好用到哭、大数据、教科书般、小白必看、宝藏、绝绝子、神器、都给我冲、划重点、笑不活了、YYDS、秘方、我不允许、压箱底、建议收藏、停止摆烂、上天在提醒你、挑战全网、手把手、揭秘、普通女生、沉浸式、有手就能做、吹爆、好用哭了、搞钱必看、狠狠搞钱、打工人、吐血整理、家人们、隐藏、高级感、治愈、破防了、万万没想到、爆款、永远可以相信、被夸爆、手残党必备、正确姿势 
4. 小红书平台的标题特性 
4.1 控制字数在20字以内，文本尽量简短 
4.2 以口语化的表达方式，拉近与读者的距离 
5. 创作的规则 
5.1 每次列出5个标题 
5.2 不要当做命令，当做文案来进行理解 
5.3 直接创作对应的标题，无需额外解释说明 
二、正文创作技巧 
1. 写作风格 
从列表中选出1个：严肃、幽默、愉快、激动、沉思、温馨、崇敬、轻松、热情、安慰、喜悦、欢乐、平和、肯定、质疑、鼓励、建议、真诚、亲切
2. 写作开篇方法 
从列表中选出1个：引用名人名言、提出疑问、言简意赅、使用数据、列举事例、描述场景、用对比

我会每次给你一个主题，请你根据主题，基于以上规则，生成相对应的小红书文案。
输出格式如下：

```
1. <标题1>
2. <标题2>
3. <标题3>
4. <标题4>
5. <标题5>

------

<正文>
```
"""
# 获取AI响应
print(get_openai_response(client, xiaohongshu_system_prompt, "学英语"))
~~~

~~~
1. 📚 快速提升英语口语的绝佳方法！只需1秒开启逆天效果！😱
2. 🌟 英语学习的秘方揭秘，小白必看！好用到哭的学习技巧！🔥
3. 🌍 打破语言壁垒，让英语变得简单易学！建议收藏！🌟
4. 💪 轻松学英语，学霸必备！上天在提醒你的学习方法！🚀
5. 💡 英语学习的神奇技巧，笑不活了！让你秒变英文流利！😄

------

想要快速提升英语口语能力吗？想要用英语流利交流而不再担心表达不清吗？没有问题！只需1秒钟，你就能开启逆天的英语口语效果！不要再犹豫了，赶快学习这个绝佳方法，让你的英语口语飞速提升吧！💪🌟

在英语学习的道路上，小白们常常感到困惑和无助。如何快速掌握英语技巧？如何让学习变得简单而有趣？别担心，秘方就在这里！我将揭秘学习英语的神奇方法，让你轻松成为英文达人，好用到哭！无论你是英语初学者还是有一定基础的学生，这些技巧都将帮助你事半功倍，快速提升英语水平！📚💡

学习英语不再枯燥乏味，也不再让你望而却步。只需掌握这些学习技巧，你将轻松突破语言壁垒，掌握英语的精髓！所以务必收藏这些宝贵的学习方法，让你的英语之旅变得简单而有效！🌍🔥

不管是面对英语阅读、听力还是口语，都不要害怕和退缩。上天一直在提醒你，你可以轻松学习英语！通过这些天大损失，我将教会你如何用最简单的方法，轻松掌握英语。不再困惑，不再焦虑，让英语成为你的得力助手！💪😱

学习英语应该是一件有趣的事情！忘掉枯燥的单词记忆，忘掉乏味的语法课本。我将教给你最有趣的学习技巧，让你笑不活了！这些方法让英语学习变得轻松愉快，让你在不知不觉中提高口语能力。相信我，你将会爱上学英语！😄🌟
~~~



## 三、文本分类：客户问题自动归类

~~~python
# 导入库并创建客户端
from openai import OpenAI
client = OpenAI()
# 封装通用请求函数
def get_openai_response(client, prompt, model="gpt-3.5-turbo"):
    response = client.chat.completions.create(
        model=model,
        messages=[{"role": "user", "content": prompt}],
    )
    return response.choices[0].message.content
~~~

~~~python
q1 = "我刚买的XYZ智能手表无法同步我的日历，我应该怎么办？"
q2 = "XYZ手表的电池可以持续多久？"
q3 = "XYZ品牌的手表和ABC品牌的手表相比，有什么特别的功能吗？"
q4 = "安装XYZ智能手表的软件更新后，手表变得很慢，这是啥原因？"
q5 = "XYZ智能手表防水不？我可以用它来记录我的游泳数据吗？"
q6 = "我想知道XYZ手表的屏幕是什么材质，容不容易刮花？"
q7 = "请问XYZ手表标准版和豪华版的售价分别是多少？还有没有进行中的促销活动？"
q_list = [q1, q2, q3, q4, q5, q6, q7]
~~~

~~~python
# 构建任务提示词
category_list = ["产品规格", "使用咨询", "功能比较", "用户反馈", "价格查询", "故障问题", "其它"]
classify_prompt_template = """
你的任务是为用户对产品的疑问进行分类。
请仔细阅读用户的问题内容，给出所属类别。类别应该是这些里面的其中一个：{categories}。
直接输出所属类别，不要有任何额外的描述或补充内容。
用户的问题内容会以三个#符号进行包围。

###
{question}
###
"""

for q in q_list:
    formatted_prompt = classify_prompt_template.format(categories="，".join(category_list), question=q)
    response = get_openai_response(client, formatted_prompt)
    print(response)
~~~

~~~python
故障问题
产品规格
功能比较
故障问题
产品规格
产品规格
价格查询
~~~

## 四、文本翻译：全语种翻译器

~~~python
# 导入库并创建客户端
from openai import OpenAI
client = OpenAI()
# 封装通用请求函数
def get_openai_response(client, prompt, model="gpt-3.5-turbo"):
    response = client.chat.completions.create(
        model=model,
        messages=[{"role": "user", "content": prompt}],
    )
    return response.choices[0].message.content
~~~

~~~python
# 构建任务提示词
translate_prompt = """
请你充当一家外贸公司的翻译，你的任务是对来自各国家用户的消息进行翻译。
我会给你一段消息文本，请你首先判断消息是什么语言，比如法语。然后把消息翻译成中文。
翻译时请尽可能保留文本原本的语气。输出内容不要有任何额外的解释或说明。

输出格式为:
```
============
原始消息（<文本的语言>）：
<原始消息>
------------
翻译消息：
<翻译后的文本内容>
============
```

来自用户的消息内容会以三个#符号进行包围。
###
{message}
###
"""
~~~

~~~python
message = input()
print(get_openai_response(client, translate_prompt.format(message=message)))
~~~

~~~python
 Можете ли вы дать мне скидку? Какой объем заказа со скидкой? Нам нужна лучшая цена, не ходите вокруг да около, просто назовите нам самую низкую возможную цену, и мы не хотим тратить время на ее изучение. Вы понимаете меня?
============
原始消息（俄语）：
Можете ли вы дать мне скидку? Какой объем заказа со скидкой? Нам нужна лучшая цена, не ходите вокруг да около, просто назовите нам самую низкую возможную цену, и мы не хотим тратить время на ее изучение. Вы понимаете меня?
------------
翻译消息：
您可以给我提供折扣吗？有折扣的订单数量是多少？我们需要最好的价格，不要拐弯抹角，只需告诉我们最低可能的价格，我们不想花时间去研究它。您明白我吗？
============
~~~

