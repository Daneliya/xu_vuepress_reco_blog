---
title: 提示词工程
tags:
  - Python
categories:
  - Python
---



## 一、什么构成了一个好的提示？

与大语言模型高效沟通的核心——提示（Prompt）

### 1、什么是提示工程？

- 提示的定义
  - 提示是我们输入给AI的问题或指示，是AI生成回应的基础。
- 提示的重要性
  - 高质量的提示能显著提升AI的理解能力、执行效率和输出准确性。
- 提示工程的本质
  - 研究如何优化与AI的沟通方式，核心在于**提示的设计与迭代优化**。

------

### 2、OpenAI官方推荐的七大提示工程原则

1. 使用最新模型
2. 指令前置 + 分隔符
3. 具体、详细、描述性强
4. 提供输出格式示例
5. 先零样本，后小样本
6. 要求具体明确，避免空洞
7. 正向引导，明确应做之事

#### 原则一 —— 使用最新模型

- 模型版本演进
  - 早期模型如 `text-ada`, `text-babbage`, `text-curie`, `text-davinci` 主要用于文本补全。
  - 当前主流为擅长对话的 `GPT-3.5 Turbo`、`GPT-4` 等。
- 选择建议
  - 优先选用最新模型（字母靠后或数字更大），理解与生成能力更强。
  - 成本是次要考虑因素，需权衡性能与预算。

#### 原则二 —— 指令前置并清晰分隔

- 错误做法

  - 指令与上下文混在一起，如：“总结以下内容……[文本]”。

- 正确做法

  - 将指令放在提示开头，并用`"""`或`!!!`明确分隔指令与上下文：

    ```markdown
    请将以下文本的要点用列表形式总结：
    """
    [要总结的文本内容]
    """
    ```

  - 这有助于模型更好地区分“做什么”和“对什么做”。

#### 原则三 —— 具体、详细、描述性强

- 模糊提示示例
  - “写一首关于OpenAI的诗” → 输出不可控。
- 优化后的提示示例
  - “写一首12行的现代诗，主题为‘AI如何改变人类创造力’，风格要富有哲思和诗意，避免技术术语。”
  - 包含了**长度、题材、风格、主题、限制条件**等细节，输出更符合预期。

#### 原则四 —— 提供输出格式示例

- 无格式引导的问题

  - “从文本中提取公司名、人名、主题、子主题” → 输出格式随意。

- 带模板的提示

  - 提供结构化模板：

    ```
    公司名: [用逗号分隔]
    人名: [用||分隔]
    主题: [用||分隔]
    子主题: [用||分隔]
    ```

  - 模型会模仿该格式输出，便于后续程序解析。

#### 原则五 —— 先零样本，后小样本

- 零样本提示（Zero-shot）
  - 直接给出指令，不提供任何示例。
  - 适用于简单任务或模型已具备相关能力。
- 小样本提示（Few-shot）
  - 当零样本效果不佳时，提供1-3个输入-输出示例。
  - 示例能帮助模型理解任务模式和期望输出。
  - 后续章节将深入讲解小样本学习技巧。

#### 原则六 —— 避免空洞描述，要求具体明确

- 模糊描述示例
  - “描述要短，不要太多” → 不够具体。
- 精确描述示例
  - “用3到5句话组成一个段落来描述此产品。”
  - 明确了长度和结构，减少歧义。

#### 原则七 —— 告诉AI“应该做什么”，而非“不要做什么”

- 负面指令的局限
  - 如：“不要问用户名或密码，不要重复。”
  - 只限制了行为，未指明正确方向。
- 正向引导更有效
  - 如：“你的任务是引导用户查阅帮助文档解决问题。请勿询问任何个人隐私信息。”
  - 明确了目标行为，引导AI采取积极行动。

~~~python
from openai import OpenAI
import json

client = OpenAI()

prompt = f"""
生成一个由三个虚构的订单信息所组成的列表，以JSON格式进行返回。
JSON列表里的每个元素包含以下信息：
order_id、customer_name、order_item、phone。
所有信息都是字符串。
除了JSON之外，不要输出任何额外的文本。
"""

response = client.chat.completions.create(
  model="gpt-3.5-turbo",
  messages=[
    {
      "role": "user",
      "content": prompt
    }
  ]
)
content = response.choices[0].message.content

json.loads(content)

[{'order_id': '123',
  'customer_name': 'John Smith',
  'order_item': 'Shoes',
  'phone': '1234567890'},
 {'order_id': '456',
  'customer_name': 'Jane Doe',
  'order_item': 'T-shirt',
  'phone': '9876543210'},
 {'order_id': '789',
  'customer_name': 'Tom Thompson',
  'order_item': 'Jeans',
  'phone': '4567890123'}]

json.loads(content)[0]["phone"]、

'1234567890'
~~~



## 二、限定输出格式

## 三、零样本VS小样本

## 四、思维链与分步骤思考